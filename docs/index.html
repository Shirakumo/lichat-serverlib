<!DOCTYPE html> <html lang="EN"> <head> <meta charset="utf-8"> <title>Lichat Serverlib</title> <style>html body{margin:0 auto 0 auto;padding:20px;max-width:1024px;font-family:sans-serif;font-size:14pt;overflow-y:scroll;}html body a{text-decoration:none;}html body a[href]{color:#0055AA;}html body a[href]:hover{color:#0088EE;}html body pre{background:#FAFAFA;border:1px solid #DDDDDD;padding:0.75em;overflow-x:auto;}html body pre >code a[href]{color:#223388;}article.project h1{font-size:1.7em;}article.project h1,article.project h2,article.project h3,article.project h4,article.project h5,article.project h6{margin:0.2em 0 0.1em 0;text-indent:1em;}article.project >header{text-align:center;}article.project >header img.logo{display:block;margin:auto;max-height:170px;}article.project >header h1{display:inline-block;text-indent:0;font-size:2.5em;}article.project >header .version{vertical-align:bottom;}article.project >header .languages{margin-top:-0.5em;text-transform:capitalize;}article.project >header .description{margin:0;}article.project >header .pages{margin-top:0.5em;font-size:1.2em;text-transform:capitalize;}article.project >header .pages a{display:inline-block;padding:0 0.2em;}article.project >section{margin:1em 0 1em 0;}article.project >section img{max-width:100%;}article.project #index >ul{list-style:none;margin:0;padding:0;}article.project .row label{display:inline-block;min-width:8em;}article.project #system .row{display:flex;}article.project #system #dependencies{display:inline;margin:0;padding:0;}article.project #system #dependencies li{display:inline;padding:0 0.2em;}article.project #system #author label{vertical-align:top;}article.project #system #author ul{display:inline-block;margin:0;padding:0;list-style:none;}article.project #toc nav>*{margin-left:1em;display:block;}article.definition{margin:1em 0 0 0;}article.definition >header h1,article.definition >header h2,article.definition >header h3,article.definition >header h4,article.definition >header h5,article.definition >header h6{text-indent:0;display:inline-block;}article.definition >header ul{display:inline-block;list-style:none;margin:0;padding:0;}article.definition >header ul li{display:inline-block;padding:0 0.2em 0 0;}article.definition >header .visibility{display:none;}article.definition >header .visibility,article.definition >header .type{text-transform:lowercase;}article.definition >header .source-link{visibility:hidden;float:right;}article.definition >header .source-link:after{visibility:visible;content:"[SRC]";}article.definition .docstring{margin:0 0 0 1em;}article.definition .docstring pre{font-size:0.8em;white-space:pre-wrap;}.definition.package >header ul.nicknames{display:inline-block;list-style:none;margin:0;padding:0 0 0 1em;}.definition.package >header ul.nicknames li{display:inline;}.definition.package >header ul.nicknames:before{content:"(";}.definition.package >header ul.nicknames:after{content:")";}.definition.package ul.definitions{margin:0;list-style:none;padding:0 0 0 0.5em;}.definition.callable >header .name:before,.definition.type >header .name:before{content:"(";font-weight:normal;}.definition.callable >header .arguments:after,.definition.type >header .arguments:after{content:")";}.definition.callable >header .arguments .arguments:before,.definition.type >header .arguments .arguments:before{content:"(";}.definition.callable >header .arguments .argument,.definition.type >header .arguments .argument{padding:0;}.definition.callable >header .arguments .argument.lambda-list-keyword,.definition.type >header .arguments .argument.lambda-list-keyword{color:#991155;}.definition li>mark{background:none;border-left:0.3em solid #0088EE;padding-left:0.3em;display:block;}@media (min-width: 1300px){html body{padding-left:16em;}article.project #toc{margin:0;position:fixed;left:0;top:0;bottom:0;width:15em;overflow-y:auto;background:#F0F0F0;border-right:1px solid #A0A0A0;}}</style> </head> <body> <article class="project"> <header>   <h1>lichat serverlib</h1>   <span class="version">1.0.0</span>    <p class="description">Tools to help build a server using the lichat protocol.</p>   </header> <section id="toc"> <h2>Table of Contents</h2> <nav> <a href="#project">Top</a>  <a href="#documentation">Documentation</a> <nav> <a href="#about_lichat-serverlib">About Lichat-Serverlib</a>  <a href="#implementing_an_overarching_server">Implementing an Overarching Server</a>  <a href="#also_see">Also See</a> </nav>  <a href="#system">System</a>  <a href="#system">Packages</a> <nav> <a href="#PACKAGE%20LICHAT-SERVERLIB">LICHAT-SERVERLIB</a> </nav>  </nav> </section>  <section id="documentation"><h2 id="about_lichat-serverlib">About Lichat-Serverlib</h2> <p>This is an implementation of the server-side protocol part of the <a href="https://shirakumo.org/projects/lichat-protocol">Lichat protocol</a>. It provides an extensible, transport-agnostic implementation that can be used to base a functional server on. All that the real server needs to take care of is the underlying connection establishment and reading.</p> <p>You do not need this library if you are looking to implement a client. You don't <em>need</em> it if you're looking to implement a server either, but it will take care of a large part of the implementation tasks for you if you do use it.</p> <h2 id="implementing_an_overarching_server">Implementing an Overarching Server</h2> <p>In order to implement an actual server, you will want to do the following:</p> <ul> <li>Subclass at least <code><a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3ASERVER" class="xref">server</a></code> and <code><a href="#CLASS%20LICHAT-SERVERLIB%3ACONNECTION" class="xref">connection</a></code>.</li> <li>Provide functions to start a listener on a server instance.</li> <li>For each client that connects, create a <code><a href="#CLASS%20LICHAT-SERVERLIB%3ACONNECTION" class="xref">connection</a></code> object.</li> <li>Provide functions to repeatedly read updates from a <code><a href="#CLASS%20LICHAT-SERVERLIB%3ACONNECTION" class="xref">connection</a></code> and send them to <code><a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3APROCESS" class="xref">process</a></code>.</li> <li>Supply an after method on <code><a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3ATEARDOWN-CONNECTION" class="xref">teardown-connection</a></code> that closes the connection to the client properly.</li> <li>Provide a primary method for <code><a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3ASEND" class="xref">send</a></code> specialised on your <code><a href="#CLASS%20LICHAT-SERVERLIB%3ACONNECTION" class="xref">connection</a></code> subclass that handles the actual wire transmission of an update.</li> <li>Handle potential synchronisation or mutual-exclusion issues to users, channels, profiles, and connections on the server if your server is multi-threaded.</li> </ul> <p>For a simple illustrative example, see the <a href="https://shirakumo.org/projects/lichat-tcp-server">lichat-tcp-server</a>.</p> <h2 id="also_see">Also See</h2> <ul> <li><a href="https://shirakumo.github.io/lichat-protocol">lichat-protocol</a> The Lichat protocol specification.</li> <li><a href="https://shirakumo.github.io/lichat-tcp-server">lichat-tcp-server</a> A basic, threaded, TCP-based implementation of a Lichat server.</li> <li><a href="https://shirakumo.github.io/lichat-tcp-client">lichat-tcp-client</a> A basic, threaded, TCP-based implementation of a Lichat client.</li> <li><a href="https://github.com/Shirakumo/lionchat">LionChat</a> A Qt GUI client for a TCP server.</li> </ul> </section>    <section id="system"> <h2>System Information</h2>  <div class="row"> <label for="version">Version:</label> <a id="version">1.0.0</a> </div>   <div class="row"> <label for="dependencies">Dependencies:</label> <ul id="dependencies"><li><a class="external" href="https://Shirakumo.github.io/lichat-protocol/">lichat-protocol</a></li><li><a class="external" href="https://Shinmera.github.io/crypto-shortcuts/">crypto-shortcuts</a></li><li><a class="external" href="https://Shinmera.github.io/trivial-mimes/">trivial-mimes</a></li><li><a class="external" href="https://Shinmera.github.io/documentation-utils/">documentation-utils</a></li></ul> </div>   <div class="row" id="author"> <label for="author">Author:</label> <a href="mailto:shinmera@tymoon.eu">Yukari Hafner</a> </div>   <div class="row"> <label for="license">License:</label> <a id="license" href="https://github.com/Shirakumo/lichat-serverlib/blob/c35d895fe59ce7cc5aebda4fefa84b9c04ffc4f1/LICENSE">zlib</a> </div>   <div class="row"> <label for="homepage">Homepage:</label> <a id="homepage" href="https://Shirakumo.github.io/lichat-serverlib/">https://Shirakumo.github.io/lichat-serverlib/</a> </div>   <div class="row"> <label for="bug-tracker">Bug Tracker:</label> <a id="bug-tracker" href="https://github.com/Shirakumo/lichat-serverlib/issues">https://github.com/Shirakumo/lichat-serverlib/issues</a> </div>   <div class="row"> <label for="sources">Sources:</label> <a id="sources" href="https://github.com/Shirakumo/lichat-serverlib.git">https://github.com/Shirakumo/lichat-serverlib.git</a> </div>  </section>    <section id="index"> <h2>Definition Index</h2> <ul> <li> <article class="definition package" id="PACKAGE LICHAT-SERVERLIB"> <header> <h3> <a href="#PACKAGE%20LICHAT-SERVERLIB">LICHAT-SERVERLIB</a> </h3> <ul class="nicknames"> <li>ORG.SHIRAKUMO.LICHAT.SERVERLIB</li> </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> <ul class="definitions"> <li> <article class="definition special-variable" id="VARIABLE LICHAT-SERVERLIB:*ALLOWED-EMOTE-CONTENT-TYPES*"> <header> <span class="visibility">EXTERNAL</span> <span class="type">SPECIAL-VARIABLE</span> <h4 class="name"> <a href="#VARIABLE%20LICHAT-SERVERLIB%3A%2AALLOWED-EMOTE-CONTENT-TYPES%2A">*ALLOWED-EMOTE-CONTENT-TYPES*</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shirakumo/lichat-serverlib/blob/c35d895fe59ce7cc5aebda4fefa84b9c04ffc4f1/emotes.lisp#L4">Source</a>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition class" id="CLASS LICHAT-SERVERLIB:BACKLOGGED-CHANNEL"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20LICHAT-SERVERLIB%3ABACKLOGGED-CHANNEL">BACKLOGGED-CHANNEL</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shirakumo/lichat-serverlib/blob/c35d895fe59ce7cc5aebda4fefa84b9c04ffc4f1/server-objects.lisp#L23">Source</a>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition class" id="CLASS LICHAT-SERVERLIB:CHANNEL"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20LICHAT-SERVERLIB%3ACHANNEL">CHANNEL</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shirakumo/lichat-serverlib/blob/c35d895fe59ce7cc5aebda4fefa84b9c04ffc4f1/server-objects.lisp#L16">Source</a>  </header> <div class="docstring"><pre>A server-side channel object.

See <a href="https://Shirakumo.github.io/lichat-protocol/#GENERIC-FUNCTION%20LICHAT-PROTOCOL%3ACHANNEL" class="xref">LICHAT-PROTOCOL:CHANNEL</a>
See <a href="#CLASS%20LICHAT-SERVERLIB%3ATIMEOUTABLE" class="xref">TIMEOUTABLE</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS LICHAT-SERVERLIB:CONNECTION"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20LICHAT-SERVERLIB%3ACONNECTION">CONNECTION</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shirakumo/lichat-serverlib/blob/c35d895fe59ce7cc5aebda4fefa84b9c04ffc4f1/server-objects.lisp#L30">Source</a>  </header> <div class="docstring"><pre>The representation of a client connection.

See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3ASERVER" class="xref">SERVER</a>
See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3ALAST-UPDATE" class="xref">LAST-UPDATE</a>
See <a href="https://Shirakumo.github.io/lichat-protocol/#CLASS%20LICHAT-PROTOCOL%3ACONNECTION" class="xref">LICHAT-PROTOCOL:CONNECTION</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS LICHAT-SERVERLIB:FLOOD-PROTECTED-CONNECTION"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20LICHAT-SERVERLIB%3AFLOOD-PROTECTED-CONNECTION">FLOOD-PROTECTED-CONNECTION</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shirakumo/lichat-serverlib/blob/c35d895fe59ce7cc5aebda4fefa84b9c04ffc4f1/server-objects.lisp#L45">Source</a>  </header> <div class="docstring"><pre>A connection with basic time-frame flood-protection.

See <a href="#CLASS%20LICHAT-SERVERLIB%3ACONNECTION" class="xref">CONNECTION</a>
See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3ALAST-FRAME" class="xref">LAST-FRAME</a>
See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AFRAME-COUNT" class="xref">FRAME-COUNT</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS LICHAT-SERVERLIB:FLOOD-PROTECTED-SERVER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20LICHAT-SERVERLIB%3AFLOOD-PROTECTED-SERVER">FLOOD-PROTECTED-SERVER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shirakumo/lichat-serverlib/blob/c35d895fe59ce7cc5aebda4fefa84b9c04ffc4f1/server-objects.lisp#L78">Source</a>  </header> <div class="docstring"><pre>A server with basic time-frame flood-protection.

See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3ASERVER" class="xref">SERVER</a>
See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AFLOOD-FRAME" class="xref">FLOOD-FRAME</a>
See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AFLOOD-LIMIT" class="xref">FLOOD-LIMIT</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS LICHAT-SERVERLIB:PROFILE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20LICHAT-SERVERLIB%3APROFILE">PROFILE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shirakumo/lichat-serverlib/blob/c35d895fe59ce7cc5aebda4fefa84b9c04ffc4f1/server-objects.lisp#L49">Source</a>  </header> <div class="docstring"><pre>A server-side profile object

See <a href="https://Shirakumo.github.io/lichat-protocol/#CLASS%20LICHAT-PROTOCOL%3APROFILE" class="xref">LICHAT-PROTOCOL:PROFILE</a>
See <a href="#CLASS%20LICHAT-SERVERLIB%3ATIMEOUTABLE" class="xref">TIMEOUTABLE</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS LICHAT-SERVERLIB:SERVER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20LICHAT-SERVERLIB%3ASERVER">SERVER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shirakumo/lichat-serverlib/blob/c35d895fe59ce7cc5aebda4fefa84b9c04ffc4f1/server-objects.lisp#L66">Source</a>  </header> <div class="docstring"><pre>An object representation of the server.

See <a href="#CLASS%20LICHAT-SERVERLIB%3AUSER" class="xref">USER</a>
See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AUSERS" class="xref">USERS</a>
See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3APROFILES" class="xref">PROFILES</a>
See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3ACHANNELS" class="xref">CHANNELS</a>
See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AIDLE-TIMEOUT" class="xref">IDLE-TIMEOUT</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS LICHAT-SERVERLIB:TIMEOUTABLE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20LICHAT-SERVERLIB%3ATIMEOUTABLE">TIMEOUTABLE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shirakumo/lichat-serverlib/blob/c35d895fe59ce7cc5aebda4fefa84b9c04ffc4f1/server-objects.lisp#L3">Source</a>  </header> <div class="docstring"><pre>Superclass for objects that can be invalidated through a timeout.

See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3ATIMEOUT" class="xref">TIMEOUT</a>
See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3ASTART-TIMEOUT" class="xref">START-TIMEOUT</a>
See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3ARESET-TIMEOUT" class="xref">RESET-TIMEOUT</a>
See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AALIVE-P" class="xref">ALIVE-P</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS LICHAT-SERVERLIB:USER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20LICHAT-SERVERLIB%3AUSER">USER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shirakumo/lichat-serverlib/blob/c35d895fe59ce7cc5aebda4fefa84b9c04ffc4f1/server-objects.lisp#L27">Source</a>  </header> <div class="docstring"><pre>A server-side user object

See <a href="https://Shirakumo.github.io/lichat-protocol/#GENERIC-FUNCTION%20LICHAT-PROTOCOL%3AUSER" class="xref">LICHAT-PROTOCOL:USER</a></pre></div> </article> </li>  <li> <article class="definition condition" id="CONDITION LICHAT-SERVERLIB:FAILURE-CONDITION"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CONDITION</span> <h4 class="name"> <a href="#CONDITION%20LICHAT-SERVERLIB%3AFAILURE-CONDITION">FAILURE-CONDITION</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shirakumo/lichat-serverlib/blob/c35d895fe59ce7cc5aebda4fefa84b9c04ffc4f1/connection-maintenance.lisp#L3">Source</a>  </header> <div class="docstring"><pre>Wrapper condition to carry a failure update.

See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AFAILURE-TYPE" class="xref">FAILURE-TYPE</a>
See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AFAILURE-ARGS" class="xref">FAILURE-ARGS</a>
See <a href="#FUNCTION%20LICHAT-SERVERLIB%3AFAIL%21" class="xref">FAIL!</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION LICHAT-SERVERLIB:ADD-EMOTE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20LICHAT-SERVERLIB%3AADD-EMOTE">ADD-EMOTE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">PATHNAME</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shirakumo/lichat-serverlib/blob/c35d895fe59ce7cc5aebda4fefa84b9c04ffc4f1/emotes.lisp#L16">Source</a>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION LICHAT-SERVERLIB:ADD-EMOTES"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20LICHAT-SERVERLIB%3AADD-EMOTES">ADD-EMOTES</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">DIRECTORY</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shirakumo/lichat-serverlib/blob/c35d895fe59ce7cc5aebda4fefa84b9c04ffc4f1/emotes.lisp#L19">Source</a>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION LICHAT-SERVERLIB:CHECK-CHANNEL"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20LICHAT-SERVERLIB%3ACHECK-CHANNEL">CHECK-CHANNEL</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">CONNECTION</li>    <li class="argument">UPDATE</li>    <li class="argument lambda-list-keyword">&amp;OPTIONAL</li>    <li class="argument">MUST-BE-IN</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shirakumo/lichat-serverlib/blob/c35d895fe59ce7cc5aebda4fefa84b9c04ffc4f1/server-operations.lisp#L149">Source</a>  </header> <div class="docstring"><pre>Checks whether the CHANNEL field is a valid channel.

If the channel does not exist, a FAILURE-CONDITION for a
LICHAT-PROTOCOL:NO-SUCH-CHANNEL failure is signalled. If it
does exist, but the user is not a part of it, a FAILURE
CONDITION for a LICHAT-PROTOCOL:NOT-IN-CHANNEL failure is
signalled. Otherwise, the corresponding channel object is
returned.

This is in accordance with §5.1.5 §5.4.2 §5.4.3 §5.4.4 §5.4.5

See <a href="https://Shirakumo.github.io/lichat-protocol/#CLASS%20LICHAT-PROTOCOL%3ANO-SUCH-CHANNEL" class="xref">LICHAT-PROTOCOL:NO-SUCH-CHANNEL</a>
See <a href="https://Shirakumo.github.io/lichat-protocol/#CLASS%20LICHAT-PROTOCOL%3ANOT-IN-CHANNEL" class="xref">LICHAT-PROTOCOL:NOT-IN-CHANNEL</a>
See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AFIND-CHANNEL" class="xref">FIND-CHANNEL</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION LICHAT-SERVERLIB:CHECK-CHANNELNAME"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20LICHAT-SERVERLIB%3ACHECK-CHANNELNAME">CHECK-CHANNELNAME</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">CONNECTION</li>    <li class="argument">UPDATE</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shirakumo/lichat-serverlib/blob/c35d895fe59ce7cc5aebda4fefa84b9c04ffc4f1/server-operations.lisp#L161">Source</a>  </header> <div class="docstring"><pre>Checks whether the CHANNEL field has a valid, unused name.

If the channel name is malformed, a FAILURE-CONDITION for
a LICHAT-PROTOCOL:BAD-NAME failure is signalled. If it is
valid, but a channel of that name already exists, a FAILURE-
CONDITION for a LICHAT-PROTOCOL:CHANNELNAME-TAKEN failure is
signalled.

This is in accordance with §5.1.3 §5.3.2

See <a href="https://Shirakumo.github.io/lichat-protocol/#CLASS%20LICHAT-PROTOCOL%3ABAD-NAME" class="xref">LICHAT-PROTOCOL:BAD-NAME</a>
See <a href="https://Shirakumo.github.io/lichat-protocol/#CLASS%20LICHAT-PROTOCOL%3ACHANNELNAME-TAKEN" class="xref">LICHAT-PROTOCOL:CHANNELNAME-TAKEN</a>
See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AFIND-CHANNEL" class="xref">FIND-CHANNEL</a>
See <a href="https://Shirakumo.github.io/lichat-protocol/#FUNCTION%20LICHAT-PROTOCOL%3ACHANNELNAME-P" class="xref">LICHAT-PROTOCOL:CHANNELNAME-P</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION LICHAT-SERVERLIB:CHECK-FROM"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20LICHAT-SERVERLIB%3ACHECK-FROM">CHECK-FROM</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">CONNECTION</li>    <li class="argument">UPDATE</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shirakumo/lichat-serverlib/blob/c35d895fe59ce7cc5aebda4fefa84b9c04ffc4f1/server-operations.lisp#L133">Source</a>  </header> <div class="docstring"><pre>Checks whether the FROM field matches the update.

If it is not, a FAILURE-CONDITION for a LICHAT-PROTOCOL:
USERNAME-MISMATCH failure is signalled. If it is, the
corresponding user object is returned.

This is in accordance with §5.1.4

See <a href="https://Shirakumo.github.io/lichat-protocol/#CLASS%20LICHAT-PROTOCOL%3AUSERNAME-MISMATCH" class="xref">LICHAT-PROTOCOL:USERNAME-MISMATCH</a>
See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AFIND-USER" class="xref">FIND-USER</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION LICHAT-SERVERLIB:CHECK-PERMITTED"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20LICHAT-SERVERLIB%3ACHECK-PERMITTED">CHECK-PERMITTED</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">CONNECTION</li>    <li class="argument">UPDATE</li>    <li class="argument lambda-list-keyword">&amp;OPTIONAL</li>    <li class="argument">CHANNEL</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shirakumo/lichat-serverlib/blob/c35d895fe59ce7cc5aebda4fefa84b9c04ffc4f1/server-operations.lisp#L125">Source</a>  </header> <div class="docstring"><pre>Checks whether the given update is permitted.

If it is not, a FAILURE-CONDITION for a LICHAT-PROTOCOL:
INSUFFICIENT-PERMISSIONS failure is signalled.

This is in accordance with §5.1.7

See <a href="#FUNCTION%20LICHAT-SERVERLIB%3APERMITTED" class="xref">PERMITTED</a>
See <a href="https://Shirakumo.github.io/lichat-protocol/#CLASS%20LICHAT-PROTOCOL%3AINSUFFICIENT-PERMISSIONS" class="xref">LICHAT-PROTOCOL:INSUFFICIENT-PERMISSIONS</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION LICHAT-SERVERLIB:CHECK-TARGET"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20LICHAT-SERVERLIB%3ACHECK-TARGET">CHECK-TARGET</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">CONNECTION</li>    <li class="argument">UPDATE</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shirakumo/lichat-serverlib/blob/c35d895fe59ce7cc5aebda4fefa84b9c04ffc4f1/server-operations.lisp#L141">Source</a>  </header> <div class="docstring"><pre>Checks whether the TARGET field is a valid user.

If it is not, a FAILURE-CONDITION for a LICHAT-PROTOCOL:
NO-SUCH-USER failure is signalled. If it is, the
corresponding user object is returned.

This is in accordance with §5.1.6

See <a href="https://Shirakumo.github.io/lichat-protocol/#CLASS%20LICHAT-PROTOCOL%3ANO-SUCH-USER" class="xref">LICHAT-PROTOCOL:NO-SUCH-USER</a>
See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AFIND-USER" class="xref">FIND-USER</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION LICHAT-SERVERLIB:COERCE-CHANNELNAME"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20LICHAT-SERVERLIB%3ACOERCE-CHANNELNAME">COERCE-CHANNELNAME</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NAME-ISH</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shirakumo/lichat-serverlib/blob/c35d895fe59ce7cc5aebda4fefa84b9c04ffc4f1/server-objects.lisp#L105">Source</a>  </header> <div class="docstring"><pre>Attempt to coerce the name-ish to a channel name.

Valid types are:
LICHAT-PROTOCOL:CHANNEL-UPDATE
LICHAT-PROTOCOL:CHANNEL
STRING</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION LICHAT-SERVERLIB:COERCE-USERNAME"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20LICHAT-SERVERLIB%3ACOERCE-USERNAME">COERCE-USERNAME</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NAME-ISH</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shirakumo/lichat-serverlib/blob/c35d895fe59ce7cc5aebda4fefa84b9c04ffc4f1/server-objects.lisp#L97">Source</a>  </header> <div class="docstring"><pre>Attempt to coerce the name-ish to a user name.

Valid types are:
LICHAT-PROTOCOL:UPDATE
LICHAT-PROTOCOL:USER
STRING</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION LICHAT-SERVERLIB:EMOTE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20LICHAT-SERVERLIB%3AEMOTE">EMOTE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NAME</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shirakumo/lichat-serverlib/blob/c35d895fe59ce7cc5aebda4fefa84b9c04ffc4f1/emotes.lisp#L6">Source</a>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION LICHAT-SERVERLIB:(SETF EMOTE)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20LICHAT-SERVERLIB%3A%28SETF%20EMOTE%29">(SETF EMOTE)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">EMOTE</li>    <li class="argument">NAME</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shirakumo/lichat-serverlib/blob/c35d895fe59ce7cc5aebda4fefa84b9c04ffc4f1/emotes.lisp#L9">Source</a>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION LICHAT-SERVERLIB:FAIL!"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20LICHAT-SERVERLIB%3AFAIL%21">FAIL!</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">TYPE-ISH</li>    <li class="argument lambda-list-keyword">&amp;REST</li>    <li class="argument">INITARGS</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shirakumo/lichat-serverlib/blob/c35d895fe59ce7cc5aebda4fefa84b9c04ffc4f1/connection-maintenance.lisp#L12">Source</a>  </header> <div class="docstring"><pre>Signal a FAILURE-CONDITION that carries the designated failure and sends it off to the client.

See <a href="#CONDITION%20LICHAT-SERVERLIB%3AFAILURE-CONDITION" class="xref">FAILURE-CONDITION</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION LICHAT-SERVERLIB:PERMITTED"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20LICHAT-SERVERLIB%3APERMITTED">PERMITTED</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">ACTION</li>    <li class="argument">CHANNEL</li>    <li class="argument">USER</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shirakumo/lichat-serverlib/blob/c35d895fe59ce7cc5aebda4fefa84b9c04ffc4f1/server-operations.lisp#L27">Source</a>  </header> <div class="docstring"><pre>Returns true if the action on the channel by the user is permitted.

Action should be the class-name of an update.

See <a href="#FUNCTION%20LICHAT-SERVERLIB%3ARULE-PERMITTED" class="xref">RULE-PERMITTED</a>
See <a href="https://Shirakumo.github.io/lichat-protocol/#GENERIC-FUNCTION%20LICHAT-PROTOCOL%3APERMISSIONS" class="xref">LICHAT-PROTOCOL:PERMISSIONS</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION LICHAT-SERVERLIB:PREP-PERMS"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20LICHAT-SERVERLIB%3APREP-PERMS">PREP-PERMS</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">REGISTRANT</li>    <li class="argument">PERMS</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shirakumo/lichat-serverlib/blob/c35d895fe59ce7cc5aebda4fefa84b9c04ffc4f1/server-operations.lisp#L7">Source</a>  </header> <div class="docstring"><pre>Prepare the list of permissions rule for the registrant.</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION LICHAT-SERVERLIB:REMOVE-EMOTE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20LICHAT-SERVERLIB%3AREMOVE-EMOTE">REMOVE-EMOTE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NAME</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shirakumo/lichat-serverlib/blob/c35d895fe59ce7cc5aebda4fefa84b9c04ffc4f1/emotes.lisp#L26">Source</a>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION LICHAT-SERVERLIB:RULE-PERMITTED"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20LICHAT-SERVERLIB%3ARULE-PERMITTED">RULE-PERMITTED</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">RULE</li>    <li class="argument">NAME</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shirakumo/lichat-serverlib/blob/c35d895fe59ce7cc5aebda4fefa84b9c04ffc4f1/server-operations.lisp#L15">Source</a>  </header> <div class="docstring"><pre>Checks whether the given rule allows the user of the given name access.

The rule evaluation is implemented according to §2.5</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION LICHAT-SERVERLIB:SEND!"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20LICHAT-SERVERLIB%3ASEND%21">SEND!</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">CONNECTION</li>    <li class="argument">TYPE-ISH</li>    <li class="argument lambda-list-keyword">&amp;REST</li>    <li class="argument">INITARGS</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shirakumo/lichat-serverlib/blob/c35d895fe59ce7cc5aebda4fefa84b9c04ffc4f1/connection-maintenance.lisp#L18">Source</a>  </header> <div class="docstring"><pre>Convenience function to send an update to a connection.

Specifically, this will:
 * Coerce the type-ish to a protocol type by looking the symbol
   up in the lichat-protocol package.
 * Add the :FROM initarg if it does not yet exist by using the
   connection's server's name.

See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3ASEND" class="xref">SEND</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:ALIVE-P"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AALIVE-P">ALIVE-P</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">TIMEOUTABLE</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Returns T if the object is still considered to be alive.</pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:ALLOWED-CONTENT-TYPES"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AALLOWED-CONTENT-TYPES">ALLOWED-CONTENT-TYPES</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:(SETF ALLOWED-CONTENT-TYPES)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3A%28SETF%20ALLOWED-CONTENT-TYPES%29">(SETF ALLOWED-CONTENT-TYPES)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:BACKLOG"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3ABACKLOG">BACKLOG</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:(SETF BACKLOG)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3A%28SETF%20BACKLOG%29">(SETF BACKLOG)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:CHANNELS"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3ACHANNELS">CHANNELS</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Accessor to the hash-table of channels that exist on the server.

See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3ASERVER" class="xref">SERVER</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:(SETF CHANNELS)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3A%28SETF%20CHANNELS%29">(SETF CHANNELS)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:CHECK-CONNECTION-TIMEOUT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3ACHECK-CONNECTION-TIMEOUT">CHECK-CONNECTION-TIMEOUT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">CONNECTION</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:CREATE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3ACREATE">CREATE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">REGISTRANT</li>    <li class="argument">NAME</li>    <li class="argument">SERVER</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Creates an appropriate channel object for the registrant on the server.

If NAME is NIL, a random ID with an @ prefix is chosen
that does not already exist on the server.
If NAME is STRING= to the name of the server, a primary
channel is created.
Otherwise a regular channel is created.

This is in accordance to §2.4

Note that this will /not/ check whether a channel of the
given name already exists and will instead just replace
it.

See <a href="#FUNCTION%20LICHAT-SERVERLIB%3APREP-PERMS" class="xref">PREP-PERMS</a>
See <a href="https://Shirakumo.github.io/lichat-protocol/#CLASS%20LICHAT-PROTOCOL%3ACREATE" class="xref">LICHAT-PROTOCOL:CREATE</a>
See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AMAKE-CHANNEL" class="xref">MAKE-CHANNEL</a>
See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AFIND-CHANNEL" class="xref">FIND-CHANNEL</a>
See <a href="https://Shirakumo.github.io/lichat-protocol/#VARIABLE%20LICHAT-PROTOCOL%3A%2ADEFAULT-ANONYMOUS-CHANNEL-PERMISSIONS%2A" class="xref">LICHAT-PROTOCOL:*DEFAULT-ANONYMOUS-CHANNEL-PERMISSIONS*</a>
See <a href="https://Shirakumo.github.io/lichat-protocol/#VARIABLE%20LICHAT-PROTOCOL%3A%2ADEFAULT-PRIMARY-CHANNEL-PERMISSIONS%2A" class="xref">LICHAT-PROTOCOL:*DEFAULT-PRIMARY-CHANNEL-PERMISSIONS*</a>
See <a href="https://Shirakumo.github.io/lichat-protocol/#VARIABLE%20LICHAT-PROTOCOL%3A%2ADEFAULT-REGULAR-CHANNEL-PERMISSIONS%2A" class="xref">LICHAT-PROTOCOL:*DEFAULT-REGULAR-CHANNEL-PERMISSIONS*</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:DEFAULT-READ-LIMIT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3ADEFAULT-READ-LIMIT">DEFAULT-READ-LIMIT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:(SETF DEFAULT-READ-LIMIT)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3A%28SETF%20DEFAULT-READ-LIMIT%29">(SETF DEFAULT-READ-LIMIT)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:FAILURE-ARGS"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AFAILURE-ARGS">FAILURE-ARGS</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">CONDITION</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>The initargs of the failure update that should be constructed to relay this error to the client.

See <a href="#CONDITION%20LICHAT-SERVERLIB%3AFAILURE-CONDITION" class="xref">FAILURE-CONDITION</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:FAILURE-TYPE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AFAILURE-TYPE">FAILURE-TYPE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">CONDITION</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>The type of the failure update that should be constructed to relay this error to the client.

See <a href="#CONDITION%20LICHAT-SERVERLIB%3AFAILURE-CONDITION" class="xref">FAILURE-CONDITION</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:FIND-CHANNEL"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AFIND-CHANNEL">FIND-CHANNEL</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NAME</li>    <li class="argument">SERVER</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Accesses a channel by the given name-ish on the server.

See <a href="#FUNCTION%20LICHAT-SERVERLIB%3ACOERCE-CHANNELNAME" class="xref">COERCE-CHANNELNAME</a>
See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3ACHANNELS" class="xref">CHANNELS</a>
See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AREMOVE-CHANNEL" class="xref">REMOVE-CHANNEL</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:(SETF FIND-CHANNEL)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3A%28SETF%20FIND-CHANNEL%29">(SETF FIND-CHANNEL)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">CHANNEL</li>    <li class="argument">NAME</li>    <li class="argument">SERVER</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:FIND-PROFILE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AFIND-PROFILE">FIND-PROFILE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NAME</li>    <li class="argument">SERVER</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Accesses a profile by the given name-ish on the server.

See <a href="#FUNCTION%20LICHAT-SERVERLIB%3ACOERCE-USERNAME" class="xref">COERCE-USERNAME</a>
See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3APROFILES" class="xref">PROFILES</a>
See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AREMOVE-PROFILE" class="xref">REMOVE-PROFILE</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:(SETF FIND-PROFILE)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3A%28SETF%20FIND-PROFILE%29">(SETF FIND-PROFILE)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">PROFILE</li>    <li class="argument">NAME</li>    <li class="argument">SERVER</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:FIND-USER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AFIND-USER">FIND-USER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NAME</li>    <li class="argument">SERVER</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Accesses a user by the given name-ish on the server.

See <a href="#FUNCTION%20LICHAT-SERVERLIB%3ACOERCE-USERNAME" class="xref">COERCE-USERNAME</a>
See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AUSERS" class="xref">USERS</a>
See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AREMOVE-USER" class="xref">REMOVE-USER</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:(SETF FIND-USER)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3A%28SETF%20FIND-USER%29">(SETF FIND-USER)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">USER</li>    <li class="argument">NAME</li>    <li class="argument">SERVER</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:FLOOD-FRAME"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AFLOOD-FRAME">FLOOD-FRAME</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Accessor to the number of seconds for which a flood frame lasts.

See <a href="#CLASS%20LICHAT-SERVERLIB%3AFLOOD-PROTECTED-SERVER" class="xref">FLOOD-PROTECTED-SERVER</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:(SETF FLOOD-FRAME)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3A%28SETF%20FLOOD-FRAME%29">(SETF FLOOD-FRAME)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:FLOOD-LIMIT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AFLOOD-LIMIT">FLOOD-LIMIT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Accessor to the number of updates that can be received within a frame before the connection is limited.

See <a href="#CLASS%20LICHAT-SERVERLIB%3AFLOOD-PROTECTED-SERVER" class="xref">FLOOD-PROTECTED-SERVER</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:(SETF FLOOD-LIMIT)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3A%28SETF%20FLOOD-LIMIT%29">(SETF FLOOD-LIMIT)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:FRAME-COUNT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AFRAME-COUNT">FRAME-COUNT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Accessor to the number of updates that were processed within the last frame.

See <a href="#CLASS%20LICHAT-SERVERLIB%3AFLOOD-PROTECTED-CONNECTION" class="xref">FLOOD-PROTECTED-CONNECTION</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:(SETF FRAME-COUNT)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3A%28SETF%20FRAME-COUNT%29">(SETF FRAME-COUNT)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:IDLE-TIMEOUT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AIDLE-TIMEOUT">IDLE-TIMEOUT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Accessor to the number of seconds a connection can be idle before it is considered timed out.

See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3ASERVER" class="xref">SERVER</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:(SETF IDLE-TIMEOUT)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3A%28SETF%20IDLE-TIMEOUT%29">(SETF IDLE-TIMEOUT)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:INIT-CONNECTION"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AINIT-CONNECTION">INIT-CONNECTION</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">CONNECTION</li>    <li class="argument">UPDATE</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Registers the connection on the server and prepares it for use.

This corresponds to §4.1.8 to §4.1.12 with the additional
act that a related profile's timeout is reset, if such a
profile is found.

See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3ARESET-TIMEOUT" class="xref">RESET-TIMEOUT</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:JOIN"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AJOIN">JOIN</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">CHANNEL</li>    <li class="argument">USER</li>    <li class="argument lambda-list-keyword">&amp;OPTIONAL</li>    <li class="argument">ID</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Join a user to a channel.

Note that this will /not/ check whether the user is already
in the channel or not and will just join them regardless.

A JOIN update is sent to all channel inhabitants, with the
given ID, or a fresh one if none is given.

The channel's timeout is reset.

See <a href="https://Shirakumo.github.io/lichat-protocol/#CLASS%20LICHAT-PROTOCOL%3AJOIN" class="xref">LICHAT-PROTOCOL:JOIN</a>
See <a href="https://Shirakumo.github.io/lichat-protocol/#FUNCTION%20LICHAT-PROTOCOL%3ANEXT-ID" class="xref">LICHAT-PROTOCOL:NEXT-ID</a>
See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3ARESET-TIMEOUT" class="xref">RESET-TIMEOUT</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:JOIN-TIMES"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AJOIN-TIMES">JOIN-TIMES</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:(SETF JOIN-TIMES)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3A%28SETF%20JOIN-TIMES%29">(SETF JOIN-TIMES)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:LAST-FRAME"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3ALAST-FRAME">LAST-FRAME</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Accessor to the last frame number the connection handled.

See <a href="#CLASS%20LICHAT-SERVERLIB%3AFLOOD-PROTECTED-CONNECTION" class="xref">FLOOD-PROTECTED-CONNECTION</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:(SETF LAST-FRAME)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3A%28SETF%20LAST-FRAME%29">(SETF LAST-FRAME)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:LAST-UPDATE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3ALAST-UPDATE">LAST-UPDATE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Accessor to the universal-time of when the last update was processed on the connection.

See <a href="#CLASS%20LICHAT-SERVERLIB%3ACONNECTION" class="xref">CONNECTION</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:(SETF LAST-UPDATE)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3A%28SETF%20LAST-UPDATE%29">(SETF LAST-UPDATE)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:LEAVE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3ALEAVE">LEAVE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">CHANNEL</li>    <li class="argument">USER</li>    <li class="argument lambda-list-keyword">&amp;KEY</li>    <li class="argument">ID</li>    <li class="argument">NOTIFY-SELF</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Leave a user from a channel.

Note that this will /not/ check whether the user actually
is in the channel or not and will just leave them regardless.

A LEAVE update is sent to all channel inhabitants, with the
given ID, or a fresh one if none is given.

If no users remain, the channel's timeout is started.

If NOTIFY-SELF is NIL, the LEAVE update is sent to every
channel inhabitant other than the user leaving. Otherwise,
the update is sent to everyone including the one leaving.

See <a href="https://Shirakumo.github.io/lichat-protocol/#CLASS%20LICHAT-PROTOCOL%3ALEAVE" class="xref">LICHAT-PROTOCOL:LEAVE</a>
See <a href="https://Shirakumo.github.io/lichat-protocol/#FUNCTION%20LICHAT-PROTOCOL%3ANEXT-ID" class="xref">LICHAT-PROTOCOL:NEXT-ID</a>
See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3ASTART-TIMEOUT" class="xref">START-TIMEOUT</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:LIST-CHANNELS"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3ALIST-CHANNELS">LIST-CHANNELS</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">SERVER</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Return a fresh list of all known channel objects for the server.

See <a href="#CLASS%20LICHAT-SERVERLIB%3ACHANNEL" class="xref">CHANNEL</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:LIST-PROFILES"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3ALIST-PROFILES">LIST-PROFILES</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">SERVER</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:LIST-USERS"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3ALIST-USERS">LIST-USERS</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">SERVER</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Return a fresh list of all known profile objects for the server.

See <a href="#CLASS%20LICHAT-SERVERLIB%3APROFILE" class="xref">PROFILE</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:MAKE-CHANNEL"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AMAKE-CHANNEL">MAKE-CHANNEL</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">SERVER</li>    <li class="argument lambda-list-keyword">&amp;REST</li>    <li class="argument">INITARGS</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Construct an appropriate channel object for the server.

See <a href="#CLASS%20LICHAT-SERVERLIB%3ACHANNEL" class="xref">CHANNEL</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:MAKE-CONNECTION"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AMAKE-CONNECTION">MAKE-CONNECTION</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">SERVER</li>    <li class="argument lambda-list-keyword">&amp;REST</li>    <li class="argument">INITARGS</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Construct an appropriate connection object for the server.

See <a href="#CLASS%20LICHAT-SERVERLIB%3ACONNECTION" class="xref">CONNECTION</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:MAKE-PROFILE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AMAKE-PROFILE">MAKE-PROFILE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">SERVER</li>    <li class="argument lambda-list-keyword">&amp;REST</li>    <li class="argument">INITARGS</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Construct an appropriate user object for the server.

See <a href="#CLASS%20LICHAT-SERVERLIB%3APROFILE" class="xref">PROFILE</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:MAKE-USER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AMAKE-USER">MAKE-USER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">SERVER</li>    <li class="argument lambda-list-keyword">&amp;REST</li>    <li class="argument">INITARGS</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Construct an appropriate user object for the server.

See <a href="#CLASS%20LICHAT-SERVERLIB%3AUSER" class="xref">USER</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:PASS-FLOOD-GATE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3APASS-FLOOD-GATE">PASS-FLOOD-GATE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">CONNECTION</li>    <li class="argument">UPDATE</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Updates flood information for the connection and returns whether the connection is fine or not.

See <a href="#CLASS%20LICHAT-SERVERLIB%3AFLOOD-PROTECTED-CONNECTION" class="xref">FLOOD-PROTECTED-CONNECTION</a>
See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3APROCESS" class="xref">PROCESS</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:PASSWORD"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3APASSWORD">PASSWORD</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:(SETF PASSWORD)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3A%28SETF%20PASSWORD%29">(SETF PASSWORD)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:PASSWORD-VALID-P"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3APASSWORD-VALID-P">PASSWORD-VALID-P</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">PROFILE</li>    <li class="argument">PASSWORD</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shirakumo/lichat-serverlib/blob/c35d895fe59ce7cc5aebda4fefa84b9c04ffc4f1/server-objects.lisp#L52">Source</a>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:PROCESS"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3APROCESS">PROCESS</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">CONNECTION</li>    <li class="argument">STREAM</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Process an update source on a connection.

Sources that are accepted:
 * STREAM                 -- An update is read from the stream
                             and sent off to PROCESS again.
 * LICHAT-PROTOCOL:UPDATE -- The update is handled accordingly.

If an error of type FAILURE-CONDITION is signalled during the
evaluation of non-around methods, the encapsulated failure update
is sent to the connection. If an error of type LICHAT-PROTOCOL:
PROTOCOL-CONDITION is signalled during the evaluation of non-around
methods, an update of type LICHAT-PROTOCOL:FAILURE is sent to the
connection.

A CONTINUE restart is established around the method that can be
used to respond with a generic LICHAT-PROTOCOL:UPDATE-FAILURE
and return from the PROCESS method.

This method will also take care to handle flooding and timeout
recording for the connection.

The overarching server must establish a restart called CLOSE-
CONNECTION around the PROCESS method, or around all calls of it.
When this restart is invoked, the server must close the underlying
connection.

See <a href="https://Shirakumo.github.io/lichat-protocol/#FUNCTION%20LICHAT-PROTOCOL%3AFROM-WIRE" class="xref">LICHAT-PROTOCOL:FROM-WIRE</a>
See <a href="https://Shirakumo.github.io/lichat-protocol/#CONDITION%20LICHAT-PROTOCOL%3APROTOCOL-CONDITION" class="xref">LICHAT-PROTOCOL:PROTOCOL-CONDITION</a>
See <a href="https://Shirakumo.github.io/lichat-protocol/#CLASS%20LICHAT-PROTOCOL%3AUPDATE-FAILURE" class="xref">LICHAT-PROTOCOL:UPDATE-FAILURE</a>
See <a href="#CONDITION%20LICHAT-SERVERLIB%3AFAILURE-CONDITION" class="xref">FAILURE-CONDITION</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:PROFILES"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3APROFILES">PROFILES</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Accessor to the hash-table of profiles that exist on the server.

See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3ASERVER" class="xref">SERVER</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:(SETF PROFILES)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3A%28SETF%20PROFILES%29">(SETF PROFILES)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:READ-LIMIT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AREAD-LIMIT">READ-LIMIT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:(SETF READ-LIMIT)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3A%28SETF%20READ-LIMIT%29">(SETF READ-LIMIT)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:REGISTER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AREGISTER">REGISTER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">REGISTRANT</li>    <li class="argument">PASSWORD</li>    <li class="argument">SERVER</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Register a user profile.

Note that this will /not/ check whether the associated user
actually exists on the server or not and will just create
the profile regardless.

See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AFIND-PROFILE" class="xref">FIND-PROFILE</a>
See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AMAKE-PROFILE" class="xref">MAKE-PROFILE</a>
See <a href="https://Shirakumo.github.io/lichat-protocol/#CLASS%20LICHAT-PROTOCOL%3AREGISTER" class="xref">LICHAT-PROTOCOL:REGISTER</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:REMOVE-CHANNEL"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AREMOVE-CHANNEL">REMOVE-CHANNEL</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NAME</li>    <li class="argument">SERVER</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Removes the channel by the given name from the server.

See <a href="#FUNCTION%20LICHAT-SERVERLIB%3ACOERCE-CHANNELNAME" class="xref">COERCE-CHANNELNAME</a>
See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3ACHANNELS" class="xref">CHANNELS</a>
See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AFIND-CHANNEL" class="xref">FIND-CHANNEL</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:REMOVE-PROFILE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AREMOVE-PROFILE">REMOVE-PROFILE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NAME</li>    <li class="argument">SERVER</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Removes the profile by the given name-ish from the server.

See <a href="#FUNCTION%20LICHAT-SERVERLIB%3ACOERCE-USERNAME" class="xref">COERCE-USERNAME</a>
See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3APROFILES" class="xref">PROFILES</a>
See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AFIND-PROFILE" class="xref">FIND-PROFILE</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:REMOVE-USER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AREMOVE-USER">REMOVE-USER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NAME</li>    <li class="argument">SERVER</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Removes the user by the given name-ish from the server.

See <a href="#FUNCTION%20LICHAT-SERVERLIB%3ACOERCE-USERNAME" class="xref">COERCE-USERNAME</a>
See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AUSERS" class="xref">USERS</a>
See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AFIND-USER" class="xref">FIND-USER</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:RESET-TIMEOUT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3ARESET-TIMEOUT">RESET-TIMEOUT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">TIMEOUTABLE</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Resets the timeout to never occur.

See <a href="#CLASS%20LICHAT-SERVERLIB%3ATIMEOUTABLE" class="xref">TIMEOUTABLE</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:SEND"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3ASEND">SEND</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>    <li class="argument">CONNECTION</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Send an update to a place.

Places that are accepted:
 * CONNECTION -- Directly sends the update over the wire. Note
                 that the primary method for this must be
                 implemented by the overarching server.
 * USER       -- Relays the update to all connections of the user.
 * CHANNEL    -- Relays the update to all users in the channel.

This function has to be called in a regular interval by the
overarching server. It will take care of handling connection
timeouts and will close the connection in case of one.

See <a href="#CLASS%20LICHAT-SERVERLIB%3ACONNECTION" class="xref">CONNECTION</a>
See <a href="#CLASS%20LICHAT-SERVERLIB%3AUSER" class="xref">USER</a>
See <a href="#CLASS%20LICHAT-SERVERLIB%3ACHANNEL" class="xref">CHANNEL</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:SERVER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3ASERVER">SERVER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Accessor to the connection's server.

See <a href="#CLASS%20LICHAT-SERVERLIB%3ACONNECTION" class="xref">CONNECTION</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:(SETF SERVER)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3A%28SETF%20SERVER%29">(SETF SERVER)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:START-TIMEOUT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3ASTART-TIMEOUT">START-TIMEOUT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">TIMEOUTABLE</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Starts the timeout by setting the object's TIMEOUT slot to the correct time.

See <a href="#CLASS%20LICHAT-SERVERLIB%3ATIMEOUTABLE" class="xref">TIMEOUTABLE</a>
See <a href="https://Shirakumo.github.io/lichat-protocol/#GENERIC-FUNCTION%20LICHAT-PROTOCOL%3ALIFETIME" class="xref">LICHAT-PROTOCOL:LIFETIME</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:TEARDOWN-CONNECTION"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3ATEARDOWN-CONNECTION">TEARDOWN-CONNECTION</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">CONNECTION</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Removes and cleans up the connection on the server.

This corresponds to §4.3.3 to §4.3.4 with the additional
act that a related profile's timeout is started, if such a
profile is found.

See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3ASTART-TIMEOUT" class="xref">START-TIMEOUT</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:TIMEOUT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3ATIMEOUT">TIMEOUT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>The universal-time by which the object will be invalidated, if any.

See <a href="#CLASS%20LICHAT-SERVERLIB%3ATIMEOUTABLE" class="xref">TIMEOUTABLE</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:(SETF TIMEOUT)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3A%28SETF%20TIMEOUT%29">(SETF TIMEOUT)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:USERS"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3AUSERS">USERS</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Accessor to the hash-table of users that exist on the server.

See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3ASERVER" class="xref">SERVER</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION LICHAT-SERVERLIB:(SETF USERS)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3A%28SETF%20USERS%29">(SETF USERS)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition macro callable" id="MACRO-FUNCTION LICHAT-SERVERLIB:DEFINE-UPDATE-HANDLER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">MACRO</span> <h4 class="name"> <a href="#MACRO-FUNCTION%20LICHAT-SERVERLIB%3ADEFINE-UPDATE-HANDLER">DEFINE-UPDATE-HANDLER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">TYPE</li>    <ul class="arguments"> <li class="argument">CONNECTION</li>  <li class="argument">UPDATE</li>  <li class="argument lambda-list-keyword">&amp;REST</li> </ul>    <li class="argument lambda-list-keyword">&amp;BODY</li>    <li class="argument">BODY</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shirakumo/lichat-serverlib/blob/c35d895fe59ce7cc5aebda4fefa84b9c04ffc4f1/update-handlers.lisp#L3">Source</a>  </header> <div class="docstring"><pre>Easy wrapper to define a handler method for an update on a connection.

UPDATE is coerced to a symbol found in the LICHAT-PROTOCOL
package.

This creates a PROCESS method.

See <a href="#GENERIC-FUNCTION%20LICHAT-SERVERLIB%3APROCESS" class="xref">PROCESS</a></pre></div> </article> </li> </ul> </article> </li> </ul> </section>  </article> <script>window.addEventListener("DOMContentLoaded", function(){
    var unmarkElement = function(el){
        if(el.tagName === "mark" || el.tagName === "MARK"){
            [].forEach.call(el.childNodes, function(child){
                el.parentNode.insertBefore(child, el);
            });
            el.parentNode.removeChild(el);
        }else if(el.parentNode.tagName === "mark"){
            return unmarkElement(el.parentNode);
        }
        return null;
    }

    var unmarkAll = function(root){
        root = root || document;
        [].forEach.call(root.querySelectorAll("mark"), unmarkElement);
    }
    
    var markElement = function(el){
        if(el.parentNode.tagName === "mark" || el.parentNode.tagName === "MARK"){
            return el.parentNode;
        } else {
            unmarkAll();
            var marked = document.createElement("mark");
            el.parentNode.insertBefore(marked, el);
            marked.appendChild(el);
            return marked;
        }
    }

    var markFragmented = function(){
        if(window.location.hash){
            var el = document.getElementById(decodeURIComponent(window.location.hash.substr(1)));
            if(el) markElement(el);
        }
    }

    var registerXrefLink = function(link){
        var el = document.getElementById(decodeURIComponent(link.getAttribute("href").substr(1)));
        if(el){
            link.addEventListener("click", function(){
                markElement(el);
            });
        }
    }

    var registerXrefLinks = function(root){
        root = root || document;
        [].forEach.call(root.querySelectorAll("a.xref"), registerXrefLink);
    }

    markFragmented();
    registerXrefLinks();
}); </script> </body> </html> 